<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	
<ui:composition template="/WEB-INF/facelets/templates/plantillaPrincipal.xhtml">
	
	<ui:define name="titulo">
         Gusedu Salud
    </ui:define>
	<ui:define name="top">
	</ui:define>
	<ui:define name="content">
	
		<h:form id="formNuevo">
			<p:commandButton value="Listar" id="btnListar" style="display: none;"
				action="#{principalBean.actualizar}"
				update=":#{p:component('tablaPac')}" />
		</h:form>

		<h:form id="formBusqueda">
			<p:outputLabel value="Filtrar: " for="inpQuery" />
			<p:inputText value="#{pacienteBean.query}" id="inpQuery"
				style="width : 500px;">
				<p:ajax event="keyup" update=":#{p:component('tablaPac')}"
					listener="#{pacienteBean.filtrarBusqueda}">
				</p:ajax>
			</p:inputText>
			<p:spacer width="50px;" />
			<p:commandButton value="Nuevo Paciente"
				update=":#{p:component('panelRegistro')}"
				action="#{personaBean.valida}" oncomplete="PF('dlg1').show();" />
		</h:form>
		<br />
		<h:form id="formulario">
			<p:dataTable id="tablaPac" var="pac" value="#{pacienteBean.clientes}"
				paginator="true" rows="10">
				<p:column headerText="DNI" width="10%;">
					<h:outputText value="#{pac.cliPersona.dni}" />
				</p:column>

				<p:column headerText="Ap. Paterno">
					<h:outputText value="#{pac.cliPersona.apellidoPaterno}" />
				</p:column>

				<p:column headerText="Ap. Materno">
					<h:outputText value="#{pac.cliPersona.apellidoMaterno}" />
				</p:column>

				<p:column headerText="Nombre">
					<h:outputText value="#{pac.cliPersona.nombres}" />
				</p:column>

				<p:column headerText="Telefono movil" width="10%;">
					<h:outputText value="#{pac.cliPersona.telefonoMovil}"></h:outputText>
				</p:column>

				<p:column headerText="Opciones">
					<p:selectOneMenu value="#{principalBean.opciones}">
						<f:selectItem itemLabel="Seleccione" itemValue="S" />
						<f:selectItem itemLabel="Venta de Productos" itemValue="P" />
						<f:selectItem itemLabel="Terapias" itemValue="T" />
						<!-- <f:selectItem itemLabel="Editar Datos Clinicos" itemValue="DC" />-->
						<f:selectItem itemLabel="Historial de Visitas" itemValue="HV" />
						<f:selectItem itemLabel="Datos Medicos" itemValue="DM" />
						<p:ajax event="change"
							update=":dialogDatosClinicos,:dialogTerapia"
							listener="#{principalBean.preDatosClinicosPaciente2(pac.idCliente)}" />
					</p:selectOneMenu>
				</p:column>

			</p:dataTable>
		</h:form>
		<h:form>
			<p:dialog id="dialog" header="Nuevo Paciente" widgetVar="dlg1"
				showEffect="pop" modal="true">

				<ui:include src="prueba.xhtml" />

			</p:dialog>
		</h:form>
		<p:dialog id="dialogDatosClinicos" header="Datos Clinicos"
			widgetVar="dlgDC" showEffect="pop" modal="true">
			<h:form>
				<ui:include src="datosClinicos.xhtml" />

			</h:form>
		</p:dialog>

		<p:dialog id="dialogTerapia" header="Terapias" widgetVar="dlgT"
			showEffect="pop" modal="true" width="800px" height="550px">
			<h:form>
				<p:tabView>
					<p:tab title="Registro de Terapias">
						<ui:include src="RegistroTerapia.xhtml" />
					</p:tab>
					<p:tab title="Historial de Terapias">
						<ui:include src="ConsultarTerapia.xhtml" />
					</p:tab>
				</p:tabView>
			</h:form>
		</p:dialog>



		<h:form>
			<p:dialog id="dialogHEA" header="Historia" widgetVar="dlgHEA"
				showEffect="pop" modal="true" width="850px" height="500px">
				<ui:include src="HEA.xhtml" />
			</p:dialog>
		</h:form>

		<h:form>
			<p:dialog id="dialogProducto" header="Productos" widgetVar="dlgP"
				showEffect="pop" modal="true" width="850px" height="500px">
				<ui:include src="Producto.xhtml" />
			</p:dialog>
		</h:form>

	</ui:define>

	<ui:define name="bottom">

	</ui:define>

</ui:composition>
</html>
